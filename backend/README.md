# Dream11 Team Predictor Backend

This is the backend for the Dream11 Team Predictor application, built with Django and Django REST Framework.

## Setup

1. Create and activate a virtual environment:
```bash
python -m venv env
source env/bin/activate  # or .\env\Scripts\activate on Windows
```

2. Install dependencies:
```bash
pip install django djangorestframework djangorestframework-simplejwt django-cors-headers seaborn matplotlib pandas numpy scikit-learn
```

3. Run migrations:
```bash
python manage.py migrate
```

4. Populate database with initial data:
```bash
python manage.py seed_data
```

5. Create a superuser (for admin access):
```bash
python manage.py createsuperuser
```

6. Run the development server:
```bash
python manage.py runserver
```

## API Endpoints

### Authentication

- `POST /api/register/`: Register a new user
- `POST /api/login/`: Login and get JWT tokens
- `POST /api/token/refresh/`: Refresh JWT token
- `GET /api/user/profile/`: Get current user's profile

### Teams and Venues

- `GET /api/teams/`: List all teams
- `GET /api/teams/{id}/`: Get team details
- `GET /api/venues/`: List all venues
- `GET /api/venues/{id}/`: Get venue details

### Players

- `GET /api/players/`: List all players
- `GET /api/players/{id}/`: Get player details
- `POST /api/players/{id}/comments/`: Add comment to a player

### Predictions

- `GET /api/predictions/`: List user's predictions
- `GET /api/predictions/{id}/`: Get prediction details
- `POST /api/predict-team/`: Generate team predictions
  - Parameters:
    - `team1`: ID of the first team
    - `team2`: ID of the second team
    - `venue`: ID of the venue
    - `pitch_type`: Type of pitch (BAT/BWL/BAL/SPIN)
  - Returns:
    - Three predicted team compositions (Aggressive, Balanced, Risk-averse)
    - Team composition graphs

- `POST /api/predictions/{id}/like/`: Like/Dislike a prediction

## Machine Learning Model

The backend includes a basic machine learning model for demonstration purposes. In a production environment, this would be replaced with a more sophisticated model trained on actual cricket data.

## Database Schema

The database follows this general schema:

- `User`: Django's built-in user model
- `UserProfile`: Extended user information
- `Team`: Cricket teams
- `Venue`: Match venues
- `Player`: Cricket players with stats
- `Prediction`: Team predictions generated by the system
- `PredictionPlayer`: Players included in a prediction
- `PlayerComment`: User comments on players
- `PredictionLike`: User likes/dislikes on predictions
